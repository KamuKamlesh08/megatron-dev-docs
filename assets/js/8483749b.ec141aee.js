"use strict";(self.webpackChunkmegatron_dev_docs=self.webpackChunkmegatron_dev_docs||[]).push([[8588],{8237:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"architecture/e-commerce/03-megatron-store-enhancement","title":"Megatron Store - Database Design Enhancements","description":"This document explains the database schema and flow for the Megatron Store e-commerce application.","source":"@site/docs/architecture/e-commerce/03-megatron-store-enhancement.md","sourceDirName":"architecture/e-commerce","slug":"/architecture/e-commerce/03-megatron-store-enhancement","permalink":"/docs/architecture/e-commerce/03-megatron-store-enhancement","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"03-megatron-store-enhancement","title":"Megatron Store - Database Design Enhancements","sidebar_position":3},"sidebar":"docs","previous":{"title":"Megatron Store - Database Design","permalink":"/docs/architecture/e-commerce/02-megatron-store"},"next":{"title":"Megatron Store \u2013 Order Checkout Flow","permalink":"/docs/architecture/e-commerce/04-megatron-store-order-checkout"}}');var i=n(4848),d=n(8453);const c={id:"03-megatron-store-enhancement",title:"Megatron Store - Database Design Enhancements",sidebar_position:3},t="Megatron Store - Database Design",l={},o=[{value:"Future Enhancements (Detailed Design)",id:"future-enhancements-detailed-design",level:2},{value:"1. <code>carts</code> and <code>cart_items</code>",id:"1-carts-and-cart_items",level:3},{value:"2. <code>payment_transactions</code>",id:"2-payment_transactions",level:3},{value:"3. <code>product_reviews</code>",id:"3-product_reviews",level:3},{value:"4. <code>wishlists</code> and <code>wishlist_items</code>",id:"4-wishlists-and-wishlist_items",level:3},{value:"5. <code>saved_items</code>",id:"5-saved_items",level:3},{value:"Updated Flow With Enhancements",id:"updated-flow-with-enhancements",level:2}];function a(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"megatron-store---database-design",children:"Megatron Store - Database Design"})}),"\n",(0,i.jsxs)(s.p,{children:["This document explains the database schema and flow for the ",(0,i.jsx)(s.strong,{children:"Megatron Store"})," e-commerce application."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"future-enhancements-detailed-design",children:"Future Enhancements (Detailed Design)"}),"\n",(0,i.jsx)(s.p,{children:"To extend Megatron Store into a more production-ready system, we add the following new tables:"}),"\n",(0,i.jsxs)(s.h3,{id:"1-carts-and-cart_items",children:["1. ",(0,i.jsx)(s.code,{children:"carts"})," and ",(0,i.jsx)(s.code,{children:"cart_items"})]}),"\n",(0,i.jsx)(s.p,{children:"These tables track products a user intends to purchase before checkout."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"carts"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"cart_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"user_id"})," (FK \u2192 users)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"status"})," (active, ordered, abandoned)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"created_at"}),", ",(0,i.jsx)(s.code,{children:"updated_at"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"cart_items"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"cart_item_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"cart_id"})," (FK \u2192 carts)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"product_id"})," (FK \u2192 products)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"quantity"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"price_snapshot"})," (stores product price at the time of adding)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Flow:"}),(0,i.jsx)(s.br,{}),"\n","User adds products into a cart. When checkout happens, these rows migrate to ",(0,i.jsx)(s.code,{children:"orders"})," and ",(0,i.jsx)(s.code,{children:"order_items"}),"."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"2-payment_transactions",children:["2. ",(0,i.jsx)(s.code,{children:"payment_transactions"})]}),"\n",(0,i.jsx)(s.p,{children:"Captures all payment activities for orders."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"payment_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"order_id"})," (FK \u2192 orders)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"user_id"})," (FK \u2192 users)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"amount"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"payment_method"})," (UPI, Card, Net Banking, COD)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"provider"})," (Razorpay, Stripe, PayPal, etc.)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"status"})," (initiated, authorized, captured, failed, refunded)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"transaction_ref"})," (gateway reference ID)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"transaction_date"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Flow:"}),(0,i.jsx)(s.br,{}),"\n","Whenever a user checks out, a row is created here. Payment status updates drive the order status (e.g., from ",(0,i.jsx)(s.code,{children:"Pending"})," \u2192 ",(0,i.jsx)(s.code,{children:"Confirmed"}),")."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"3-product_reviews",children:["3. ",(0,i.jsx)(s.code,{children:"product_reviews"})]}),"\n",(0,i.jsx)(s.p,{children:"Allows customers to leave reviews and ratings."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"review_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"product_id"})," (FK \u2192 products)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"user_id"})," (FK \u2192 users)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"rating"})," (1\u20135)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"title"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"comment"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"verified_purchase"})," (boolean)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"status"})," (visible, hidden)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"created_at"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Flow:"}),(0,i.jsx)(s.br,{}),"\n","After purchasing, users can review a product. Verified purchases are highlighted. These reviews help drive recommendations and trust."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"4-wishlists-and-wishlist_items",children:["4. ",(0,i.jsx)(s.code,{children:"wishlists"})," and ",(0,i.jsx)(s.code,{children:"wishlist_items"})]}),"\n",(0,i.jsx)(s.p,{children:"Let users save items for later."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"wishlists"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"wishlist_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"user_id"})," (FK \u2192 users)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"name"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"is_default"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"created_at"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"wishlist_items"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"wishlist_item_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"wishlist_id"})," (FK \u2192 wishlists)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"product_id"})," (FK \u2192 products)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"added_at"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Flow:"}),(0,i.jsx)(s.br,{}),"\n","Users can create multiple wishlists (e.g., \u201cWork Laptop,\u201d \u201cBirthday Gift\u201d) and save items there. Marketing jobs can notify users if wishlist items go on sale."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"5-saved_items",children:["5. ",(0,i.jsx)(s.code,{children:"saved_items"})]}),"\n",(0,i.jsx)(s.p,{children:"Quick \u201csave for later\u201d option without creating a wishlist."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"saved_id"})," (PK)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"user_id"})," (FK \u2192 users)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"product_id"})," (FK \u2192 products)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"note"})," (optional)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"saved_at"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Flow:"}),(0,i.jsx)(s.br,{}),"\n","When a user removes an item from cart but doesn\u2019t want to lose it, it can be moved into ",(0,i.jsx)(s.code,{children:"saved_items"}),"."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"updated-flow-with-enhancements",children:"Updated Flow With Enhancements"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"User Browsing"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Products shown by location and category."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Cart Phase"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["User adds items to cart (",(0,i.jsx)(s.code,{children:"carts"}),", ",(0,i.jsx)(s.code,{children:"cart_items"}),")."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Checkout"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Cart \u2192 ",(0,i.jsx)(s.code,{children:"orders"})," + ",(0,i.jsx)(s.code,{children:"order_items"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Payment row created in ",(0,i.jsx)(s.code,{children:"payment_transactions"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Payment Gateway"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Updates transaction status."}),"\n",(0,i.jsx)(s.li,{children:"On success, order confirmed and inventory reduced."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Post-Purchase"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["User leaves reviews (",(0,i.jsx)(s.code,{children:"product_reviews"}),")."]}),"\n",(0,i.jsxs)(s.li,{children:["Unpurchased items stay in ",(0,i.jsx)(s.code,{children:"wishlists"})," or ",(0,i.jsx)(s.code,{children:"saved_items"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Next Steps:"}),(0,i.jsx)(s.br,{}),"\n","These enhancements make Megatron Store feature-rich and closer to a real-world e-commerce platform."]})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var r=n(6540);const i={},d=r.createContext(i);function c(e){const s=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(d.Provider,{value:s},e.children)}}}]);