"use strict";(self.webpackChunkmegatron_dev_docs=self.webpackChunkmegatron_dev_docs||[]).push([[909],{3512:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"projects/megatron-kafka-lab/kafka-setup-docker-compose","title":"Kafka Lab via Docker Compose (KRaft & ZooKeeper)","description":"This repository helps you run Apache Kafka locally in two ways:","source":"@site/docs/projects/megatron-kafka-lab/03-kafka-setup-docker-compose.md","sourceDirName":"projects/megatron-kafka-lab","slug":"/projects/megatron-kafka-lab/kafka-setup-docker-compose","permalink":"/docs/projects/megatron-kafka-lab/kafka-setup-docker-compose","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"docs","previous":{"title":"Kafka = Railway Analogy","permalink":"/docs/projects/megatron-kafka-lab/kafka-basic-concepts"},"next":{"title":"Kafka Partitions","permalink":"/docs/projects/megatron-kafka-lab/kafka-partition"}}');var o=n(4848),t=n(8453);const a={},l="Kafka Lab via Docker Compose (KRaft & ZooKeeper)",c={},d=[{value:"1) Project Layout",id:"1-project-layout",level:2},{value:"2) Prerequisites",id:"2-prerequisites",level:2},{value:"3) Optional <code>.env</code>",id:"3-optional-env",level:2},{value:"4) <code>docker-compose.yml</code> (KRaft: Kafka 3.7, single node)",id:"4-docker-composeyml-kraft-kafka-37-single-node",level:2},{value:"Start (KRaft)",id:"start-kraft",level:3},{value:"Stop / Reset (KRaft)",id:"stop--reset-kraft",level:3},{value:"5) <code>docker-compose.zookeeper.yml</code> (ZooKeeper-based)",id:"5-docker-composezookeeperyml-zookeeper-based",level:2},{value:"Start (ZooKeeper-based)",id:"start-zookeeper-based",level:3},{value:"Stop / Reset (ZooKeeper-based)",id:"stop--reset-zookeeper-based",level:3},{value:"6) Quick Smoke Test (both stacks)",id:"6-quick-smoke-test-both-stacks",level:2},{value:"7) Connectivity Cheat Sheet",id:"7-connectivity-cheat-sheet",level:2},{value:"8) Troubleshooting (both stacks)",id:"8-troubleshooting-both-stacks",level:2},{value:"9) KRaft vs ZooKeeper \u2014 At a Glance",id:"9-kraft-vs-zookeeper--at-a-glance",level:2},{value:"10) Security Notes (dev vs prod)",id:"10-security-notes-dev-vs-prod",level:2},{value:"11) Cleanup",id:"11-cleanup",level:2},{value:"12) Next Steps",id:"12-next-steps",level:2}];function i(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"kafka-lab-via-docker-compose-kraft--zookeeper",children:"Kafka Lab via Docker Compose (KRaft & ZooKeeper)"})}),"\n",(0,o.jsxs)(r.p,{children:["This repository helps you run Apache ",(0,o.jsx)(r.strong,{children:"Kafka locally"})," in two ways:"]}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"KRaft mode"})," (no ZooKeeper; modern, simpler)"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"ZooKeeper-based"})," (legacy/compatible)"]}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"1-project-layout",children:"1) Project Layout"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"kafka-lab/\r\n\u251c\u2500 docker-compose.yml            # KRaft setup (default)\r\n\u251c\u2500 docker-compose.zookeeper.yml  # ZooKeeper-based setup (optional)\r\n\u251c\u2500 .env                          # optional overrides\r\n\u2514\u2500 docs/\r\n   \u2514\u2500 Readme.md\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"2-prerequisites",children:"2) Prerequisites"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Docker \u2265 24.x and Docker Compose plugin"}),"\n",(0,o.jsxs)(r.li,{children:["Free ports:","\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"KRaft"}),": 9099 (external), 8029 (Kafka-UI)"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"ZooKeeper"}),": 2181 (ZK), 9094 (external), 8030 (Kafka-UI)"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.li,{children:["On Windows, prefer ",(0,o.jsx)(r.strong,{children:"WSL2"})," backend"]}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsxs)(r.h2,{id:"3-optional-env",children:["3) Optional ",(0,o.jsx)(r.code,{children:".env"})]}),"\n",(0,o.jsxs)(r.p,{children:["Create a ",(0,o.jsx)(r.code,{children:".env"})," if you want custom host/IP/ports."]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-env",children:"# KRaft\r\nKAFKA_KRAFT_EXTERNAL_HOST=localhost\r\nKAFKA_KRAFT_EXTERNAL_PORT=9099\r\nKAFKA_UI_KRAFT_PORT=8029\r\n\r\n# ZooKeeper stack\r\nKAFKA_ZK_EXTERNAL_HOST=localhost\r\nKAFKA_ZK_EXTERNAL_PORT=9094\r\nKAFKA_UI_ZK_PORT=8030\n"})}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"If you set these, update the compose files to reference the env vars."}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsxs)(r.h2,{id:"4-docker-composeyml-kraft-kafka-37-single-node",children:["4) ",(0,o.jsx)(r.code,{children:"docker-compose.yml"})," (KRaft: Kafka 3.7, single node)"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:'version: "3.8"\r\n\r\nservices:\r\n  kafka:\r\n    image: bitnami/kafka:3.7\r\n    container_name: kafka\r\n    restart: unless-stopped\r\n    ports:\r\n      - "9099:9099" # EXTERNAL listener exposed to host\r\n    environment:\r\n      # --- KRaft (no ZooKeeper) ---\r\n      KAFKA_ENABLE_KRAFT: "yes"\r\n      KAFKA_CFG_NODE_ID: "1"\r\n      KAFKA_CFG_PROCESS_ROLES: "broker,controller"\r\n      KAFKA_CFG_CONTROLLER_LISTENER_NAMES: "CONTROLLER"\r\n      KAFKA_CFG_CONTROLLER_QUORUM_VOTERS: "1@kafka:9093"\r\n\r\n      # --- Listeners ---\r\n      # Internal for docker network (kafka:9092), External for host (localhost:9099), Controller for quorum\r\n      KAFKA_CFG_LISTENERS: "PLAINTEXT://:9092,EXTERNAL://:9099,CONTROLLER://:9093"\r\n      KAFKA_CFG_ADVERTISED_LISTENERS: "PLAINTEXT://kafka:9092,EXTERNAL://localhost:9099"\r\n      KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP: "PLAINTEXT:PLAINTEXT,EXTERNAL:PLAINTEXT,CONTROLLER:PLAINTEXT"\r\n\r\n      # --- Broker tuning (dev) ---\r\n      KAFKA_CFG_AUTO_CREATE_TOPICS_ENABLE: "false"\r\n      KAFKA_CFG_NUM_PARTITIONS: "1"\r\n      KAFKA_CFG_OFFSETS_TOPIC_REPLICATION_FACTOR: "1"\r\n      KAFKA_CFG_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: "1"\r\n      KAFKA_CFG_TRANSACTION_STATE_LOG_MIN_ISR: "1"\r\n      KAFKA_CFG_ALLOW_EVERYONE_IF_NO_ACL_FOUND: "true"\r\n\r\n    volumes:\r\n      - kafka_data:/bitnami/kafka\r\n\r\n  kafka-ui:\r\n    image: provectuslabs/kafka-ui:latest\r\n    container_name: kafka-ui\r\n    restart: unless-stopped\r\n    ports:\r\n      - "8029:8080"\r\n    environment:\r\n      KAFKA_CLUSTERS_0_NAME: "local-kraft"\r\n      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: "kafka:9092"\r\n    depends_on:\r\n      - kafka\r\n\r\nvolumes:\r\n  kafka_data:\n'})}),"\n",(0,o.jsx)(r.h3,{id:"start-kraft",children:"Start (KRaft)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"docker compose up -d\r\n# UI:\r\n# http://localhost:8029\n"})}),"\n",(0,o.jsx)(r.h3,{id:"stop--reset-kraft",children:"Stop / Reset (KRaft)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"docker compose down                # stop and keep data\r\ndocker compose down -v             # stop and delete data\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsxs)(r.h2,{id:"5-docker-composezookeeperyml-zookeeper-based",children:["5) ",(0,o.jsx)(r.code,{children:"docker-compose.zookeeper.yml"})," (ZooKeeper-based)"]}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"This stack runs one ZooKeeper + one Kafka broker + Kafka-UI (on a different port)."}),"\n"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:'version: "3.8"\r\n\r\nservices:\r\n  zookeeper:\r\n    image: bitnami/zookeeper:3.9\r\n    container_name: zookeeper\r\n    restart: unless-stopped\r\n    environment:\r\n      ALLOW_ANONYMOUS_LOGIN: "yes"\r\n    ports:\r\n      - "2181:2181"\r\n    volumes:\r\n      - zk_data:/bitnami/zookeeper\r\n\r\n  kafka:\r\n    image: bitnami/kafka:3.7\r\n    container_name: kafka-zk\r\n    restart: unless-stopped\r\n    depends_on:\r\n      - zookeeper\r\n    ports:\r\n      - "9094:9094" # external listener for host\r\n    environment:\r\n      # --- ZooKeeper mode ---\r\n      KAFKA_ENABLE_KRAFT: "no"\r\n      KAFKA_CFG_ZOOKEEPER_CONNECT: "zookeeper:2181"\r\n\r\n      # --- Listeners: internal & external ---\r\n      KAFKA_CFG_LISTENERS: "PLAINTEXT://:9092,EXTERNAL://:9094"\r\n      KAFKA_CFG_ADVERTISED_LISTENERS: "PLAINTEXT://kafka-zk:9092,EXTERNAL://localhost:9094"\r\n      KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP: "PLAINTEXT:PLAINTEXT,EXTERNAL:PLAINTEXT"\r\n\r\n      # --- Broker tuning (dev) ---\r\n      KAFKA_CFG_AUTO_CREATE_TOPICS_ENABLE: "false"\r\n      KAFKA_CFG_NUM_PARTITIONS: "1"\r\n      KAFKA_CFG_OFFSETS_TOPIC_REPLICATION_FACTOR: "1"\r\n      KAFKA_CFG_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: "1"\r\n      KAFKA_CFG_TRANSACTION_STATE_LOG_MIN_ISR: "1"\r\n      KAFKA_CFG_ALLOW_EVERYONE_IF_NO_ACL_FOUND: "true"\r\n\r\n    volumes:\r\n      - kafka_zk_data:/bitnami/kafka\r\n\r\n  kafka-ui-zk:\r\n    image: provectuslabs/kafka-ui:latest\r\n    container_name: kafka-ui-zk\r\n    restart: unless-stopped\r\n    ports:\r\n      - "8030:8080"\r\n    environment:\r\n      KAFKA_CLUSTERS_0_NAME: "local-zk"\r\n      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: "kafka-zk:9092"\r\n    depends_on:\r\n      - kafka\r\n\r\nvolumes:\r\n  zk_data:\r\n  kafka_zk_data:\n'})}),"\n",(0,o.jsx)(r.h3,{id:"start-zookeeper-based",children:"Start (ZooKeeper-based)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"docker compose -f docker-compose.zookeeper.yml up -d\r\n# UI:\r\n# http://localhost:8030\n"})}),"\n",(0,o.jsx)(r.h3,{id:"stop--reset-zookeeper-based",children:"Stop / Reset (ZooKeeper-based)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"docker compose -f docker-compose.zookeeper.yml down\r\ndocker compose -f docker-compose.zookeeper.yml down -v\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"6-quick-smoke-test-both-stacks",children:"6) Quick Smoke Test (both stacks)"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"window docker case - switch to kafka if started it via dokcer"}),"\n"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"docker compose exec -it kafka bash\r\n# press ctrl+d to exit from here\n"})}),"\n",(0,o.jsx)(r.p,{children:"Create topic:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"/opt/bitnami/kafka/bin/kafka-topics.sh --bootstrap-server kafka:9092 --create --topic quickstart --partitions 1 --replication-factor 1\r\n\n"})}),"\n",(0,o.jsx)(r.p,{children:"List:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"/opt/bitnami/kafka/bin/kafka-topics.sh --bootstrap-server kafka:9092 --list\n"})}),"\n",(0,o.jsx)(r.p,{children:"Produce (inside container):"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"/opt/bitnami/kafka/bin/kafka-console-producer.sh --bootstrap-server kafka:9092 --topic quickstart\r\n# type a few lines, Ctrl+C to exit\n"})}),"\n",(0,o.jsx)(r.p,{children:"Consume (inside container):"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"/opt/bitnami/kafka/bin/kafka-console-consumer.sh --bootstrap-server kafka:9092 --topic quickstart --from-beginning\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"7-connectivity-cheat-sheet",children:"7) Connectivity Cheat Sheet"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Scenario"}),(0,o.jsx)(r.th,{children:"Bootstrap to use"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Host apps (KRaft)"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"localhost:9099"})})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Host apps (ZooKeeper)"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"localhost:9094"})})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Containers on same Docker network (KRaft)"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"kafka:9092"})})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Containers on same Docker network (ZooKeeper)"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"kafka-zk:9092"})})]})]})]}),"\n",(0,o.jsxs)(r.p,{children:["To allow ",(0,o.jsx)(r.strong,{children:"remote"})," machines to connect, replace ",(0,o.jsx)(r.code,{children:"localhost"})," in the ",(0,o.jsx)(r.code,{children:"KAFKA_CFG_ADVERTISED_LISTENERS"})," with your host IP/DNS and ensure firewall/port access."]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"8-troubleshooting-both-stacks",children:"8) Troubleshooting (both stacks)"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Symptom"}),(0,o.jsx)(r.th,{children:"Cause"}),(0,o.jsx)(r.th,{children:"Fix"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Clients hang / can't connect"}),(0,o.jsxs)(r.td,{children:["Wrong ",(0,o.jsx)(r.code,{children:"advertised.listeners"})]}),(0,o.jsx)(r.td,{children:"Set EXTERNAL to reachable host/IP; restart"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Kafka-UI shows no brokers"}),(0,o.jsx)(r.td,{children:"Wrong bootstrap in UI env"}),(0,o.jsxs)(r.td,{children:["Use ",(0,o.jsx)(r.code,{children:"kafka:9092"})," (KRaft) or ",(0,o.jsx)(r.code,{children:"kafka-zk:9092"})," (ZK)"]})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Port in use"}),(0,o.jsx)(r.td,{children:"Another process bound"}),(0,o.jsx)(r.td,{children:"Change host ports or free the port"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Replica errors"}),(0,o.jsx)(r.td,{children:"Single-node RF mismatch"}),(0,o.jsx)(r.td,{children:"Keep replication factor = 1"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsxs)(r.td,{children:["Data persists after ",(0,o.jsx)(r.code,{children:"down"})]}),(0,o.jsx)(r.td,{children:"Named volumes remain"}),(0,o.jsxs)(r.td,{children:["Use ",(0,o.jsx)(r.code,{children:"down -v"})," to wipe"]})]})]})]}),"\n",(0,o.jsx)(r.p,{children:"Logs:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"docker logs -f kafka\r\ndocker logs -f kafka-ui\r\ndocker logs -f zookeeper\r\ndocker logs -f kafka-zk\r\ndocker logs -f kafka-ui-zk\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"9-kraft-vs-zookeeper--at-a-glance",children:"9) KRaft vs ZooKeeper \u2014 At a Glance"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Aspect"}),(0,o.jsx)(r.th,{children:(0,o.jsx)(r.strong,{children:"KRaft (Kafka Raft)"})}),(0,o.jsx)(r.th,{children:(0,o.jsx)(r.strong,{children:"ZooKeeper-based"})})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"External dependency"}),(0,o.jsxs)(r.td,{children:[(0,o.jsx)(r.strong,{children:"None"})," (built-in controller quorum)"]}),(0,o.jsx)(r.td,{children:"Requires ZooKeeper cluster"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Setup complexity"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Simpler"})}),(0,o.jsx)(r.td,{children:"More moving parts"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Metadata store"}),(0,o.jsx)(r.td,{children:"Raft log in Kafka"}),(0,o.jsx)(r.td,{children:"ZooKeeper"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Startup"}),(0,o.jsx)(r.td,{children:"Generally faster"}),(0,o.jsx)(r.td,{children:"Slower (ZK + Kafka)"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Operational model"}),(0,o.jsx)(r.td,{children:"Unified controller/broker roles"}),(0,o.jsx)(r.td,{children:"Split responsibilities"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Scaling controllers"}),(0,o.jsx)(r.td,{children:"Via Raft voters"}),(0,o.jsx)(r.td,{children:"Scale ZooKeeper ensemble"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Kafka versions"}),(0,o.jsx)(r.td,{children:"Stable in 3.7+"}),(0,o.jsx)(r.td,{children:"Legacy path, still supported"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Migration"}),(0,o.jsx)(r.td,{children:"Tools exist ZK \u2192 KRaft"}),(0,o.jsx)(r.td,{children:"\u2014"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"New deployments"}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Recommended"})}),(0,o.jsx)(r.td,{children:"Only for legacy compatibility"})]})]})]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"10-security-notes-dev-vs-prod",children:"10) Security Notes (dev vs prod)"}),"\n",(0,o.jsxs)(r.p,{children:["These stacks use ",(0,o.jsx)(r.strong,{children:"PLAINTEXT"})," for simplicity. For production:"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Use ",(0,o.jsx)(r.strong,{children:"SSL/SASL_SSL"})]}),"\n",(0,o.jsxs)(r.li,{children:["Configure ",(0,o.jsx)(r.strong,{children:"ACLs"})," and disable ",(0,o.jsx)(r.code,{children:"ALLOW_EVERYONE_IF_NO_ACL_FOUND"})]}),"\n",(0,o.jsx)(r.li,{children:"Multi-broker clusters (\u22653) and controller quorum (\u22653 or 5 voters)"}),"\n",(0,o.jsx)(r.li,{children:"Externalized volumes, monitoring, proper resource limits"}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"11-cleanup",children:"11) Cleanup"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# KRaft\r\ndocker compose down -v\r\n\r\n# ZooKeeper\r\ndocker compose -f docker-compose.zookeeper.yml down -v\r\n\r\ndocker system prune -f\r\ndocker volume prune -f\n"})}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"12-next-steps",children:"12) Next Steps"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Point your apps to the relevant bootstrap (",(0,o.jsx)(r.code,{children:"localhost:9099"})," for KRaft, ",(0,o.jsx)(r.code,{children:"localhost:9094"})," for ZK)"]}),"\n",(0,o.jsx)(r.li,{children:"Explore topics, consumer groups, and messages in Kafka-UI"}),"\n",(0,o.jsxs)(r.li,{children:["Add example producers/consumers under ",(0,o.jsx)(r.code,{children:"/examples/"})," if needed"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>l});var s=n(6540);const o={},t=s.createContext(o);function a(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);